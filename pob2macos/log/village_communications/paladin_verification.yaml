date: 2026-01-31T20:20:00+09:00
speaker: Paladin
type: verification_plan
to: Mayor
content: |
  村長殿、検証の手順を提案します。

  Artisanの診断コードを実装した後の検証ステップ：

  前処理:
  1. 既存のPathOfBuildingプロセスを全て終了
     killall PathOfBuilding 2>/dev/null || true
  2. ログファイルをクリア
     rm -f ~/Library/Logs/PathOfBuilding.log
  3. システムコンソールをクリア

  実行:
  4. アプリを起動
     open /Users/kokage/national-operations/pob2macos/PathOfBuilding.app
  5. ちょうど5秒待機（UIが安定するまで）
  6. Cmd+Q でアプリを終了

  検証:
  7. ログファイルを確認
     cat ~/Library/Logs/PathOfBuilding.log | grep DIAGNOSTIC_PASSIVE_TREE
  8. 診断行を抽出して解析

  期待される結果パターン：

  パターンA（ノード描画成功）:
    DIAGNOSTIC_PASSIVE_TREE: spec=table, nodes=table, iter=4701, draw=4701
    →ノードは描画されているはず。UI表示か座標の問題。

  パターンB（spec.nodes問題）:
    DIAGNOSTIC_PASSIVE_TREE: spec=table, nodes=nil, iter=0, draw=0
    →spec.nodes がnilで、ループが回っていない。根本原因。

  パターンC（spec問題）:
    DIAGNOSTIC_PASSIVE_TREE: spec=nil, nodes=spec_is_nil, iter=0, draw=0
    →spec自体がnilで、build.specが設定されていない。

  パターンD（座標問題）:
    DIAGNOSTIC_PASSIVE_TREE: spec=table, nodes=table, iter=4701, draw=0
    →ループは回るがnode.x/node.yが存在しない。座標設定の問題。

  パターンE（座標外描画）:
    DIAGNOSTIC_PASSIVE_TREE: spec=table, nodes=table, iter=4701, draw=4701
    →ループと描画両方動いているが、座標が画面外。スケール/オフセット問題。

  結果分析:
  - iter=0 → ノード取得失敗
  - iter>0, draw=0 → 座標設定失敗
  - iter>0, draw>0 → 表示の問題
  - iter>0, draw=4701 → 大成功（UI確認）

verification_confidence: "99% - 真実が明らかになる"
estimated_time: "15分"
