# Auto-Approval Precedents Database
# Prophet が類似タスクの判例を参照し、自動承認の判断材料とする

auto_approval_precedents:
  - case_id: "PREC-001"
    date: "2026-02-01"
    task_type: "bug_fix"
    description: "PassiveSpec.lua メタテーブル汚染バイパス（Phase 1）"
    risk_assessment:
      technical_correctness: ✅
      implementation_safety: ✅
      risk_mitigation: ✅
      success_probability: 95%
      impact_scope: "1 file"
      reversibility: ✅
    decision: "AUTO_APPROVED"
    outcome: "SUCCESS"
    notes: "メタテーブル汚染を回避するため、PassiveSpec.lua の allocNodes 関数を修正。バックアップ完備、Git管理下での実装。"

  - case_id: "PREC-002"
    date: "2026-02-01"
    task_type: "permission_config"
    description: "Prophet エージェント権限自動承認設定"
    risk_assessment:
      technical_correctness: ✅
      implementation_safety: ✅
      risk_mitigation: ✅
      success_probability: 100%
      impact_scope: "1 config file"
      reversibility: ✅
    decision: "AUTO_APPROVED"
    outcome: "SUCCESS"
    notes: ".claude/settings.local.json に Prophet エージェントの自動承認権限を追加。完全に可逆的な設定変更。"

  - case_id: "PREC-003"
    date: "2026-02-01"
    task_type: "documentation"
    description: "村議会最終報告書作成（VILLAGE_COUNCIL_FINAL_REPORT.md）"
    risk_assessment:
      technical_correctness: ✅
      implementation_safety: ✅
      risk_mitigation: ✅
      success_probability: 100%
      impact_scope: "1 new documentation file"
      reversibility: ✅
    decision: "AUTO_APPROVED"
    outcome: "SUCCESS"
    notes: "新規ドキュメント作成のみ。既存コードへの影響なし。完全に可逆的。"

  - case_id: "PREC-004"
    date: "2026-02-01"
    task_type: "agent_protocol_update"
    description: "Prophet 自動承認プロトコル実装"
    risk_assessment:
      technical_correctness: ✅
      implementation_safety: ✅
      risk_mitigation: ✅
      success_probability: 90%
      impact_scope: "4 agent definition files + 1 new YAML"
      reversibility: ✅
    decision: "AUTO_APPROVED"
    outcome: "SUCCESS"
    notes: "エージェント定義ファイルへのプロトコル追加。バックアップ完備、Git管理下での実装。"

# 要神承認の判例（参考）
requires_divine_approval_examples:
  - case_id: "DIVINE-001"
    task_type: "architecture_change"
    description: "新規データベース導入（PostgreSQL追加）"
    reason: "新規技術スタック導入、影響範囲広い、成功確率85%（< 90%）"

  - case_id: "DIVINE-002"
    task_type: "security_change"
    description: "認証システムの変更"
    reason: "セキュリティに関わる変更のため、必ず神の承認が必要"

  - case_id: "DIVINE-003"
    task_type: "api_redesign"
    description: "REST API エンドポイント設計変更"
    reason: "アーキテクチャ変更、互換性への影響大"
