# Sage - Phase 1 詳細調査 タスク割り振り
# PoB2macOS移植プロジェクト (PRJ-003)

project_id: PRJ-003
project_name: PoB2macOS
phase: 1
phase_name: "詳細調査"
assignee: Sage
priority: highest

timestamp: "2026-01-28T23:00:00Z"
from: Mayor
status: assigned

description: |
  Path of Building 2 の macOS ネイティブ移植に向けた詳細調査を実行せよ。
  核心課題である SimpleGraphic.dll の完全な仕様把握が必須。

source_location: "~/Downloads/PathOfBuilding-PoE2-dev/"

---

## Task T1-1: SimpleGraphic全API仕様調査

task_id: T1-1
title: "SimpleGraphic全API（約50関数）の詳細仕様調査"
description: |
  SimpleGraphic.dll が提供する全API関数の詳細仕様を調査・記録せよ。

  調査対象カテゴリ:
  1. 初期化・設定関数
     - RenderInit, GetScreenSize, SetWindowTitle
  2. 描画関数
     - SetDrawColor, DrawImage, DrawString, DrawImageQuad
  3. 入力関数
     - IsKeyDown, GetCursorPos, SetCursorPos
  4. リソース管理
     - NewImage, LoadModule, LoadFont
  5. スクリプト制御
     - LaunchSubScript, SetSubScript
  6. その他ユーティリティ
     - Copy, Paste, OpenURL, SetClipboard

  成果物:
  - memory/analysis/simplegraphic_api_specifications.md
  - 各関数の署名、パラメータ型、戻り値、動作内容を記録

priority: highest
depends_on: []
estimated_hours: 8

---

## Task T1-2: HeadlessWrapper.lua完全分析

task_id: T1-2
title: "HeadlessWrapper.lua の完全分析"
description: |
  HeadlessWrapper.lua をソースコードレベルで完全分析し、
  SimpleGraphic API の実装パターンを把握せよ。

  分析項目:
  1. ファイル構造と関数配置
  2. 各APIスタブの実装パターン
  3. デフォルト値とエラーハンドリング
  4. 外部インターフェース（Launch.lua との接続）
  5. 依存関係図の作成

  成果物:
  - memory/analysis/headlesswrapper_detailed_analysis.md
  - memory/diagrams/api_dependency_diagram.txt

priority: highest
depends_on: []
estimated_hours: 6

---

## Task T1-3: 既存Lua+OpenGLバインディング調査

task_id: T1-3
title: "既存のLua+OpenGLバインディング調査"
description: |
  macOS および Linux で Lua + OpenGL を使用したプロジェクトを調査し、
  実装パターンとベストプラクティスを学習せよ。

  調査対象プロジェクト:
  1. LÖVE 2D ゲームフレームワーク
     - Lua統合方式
     - グラフィックスAPI抽象化方法
  2. Defold ゲームエンジン
     - マルチプラットフォーム対応方式
  3. その他Lua+OpenGLプロジェクト
     - Corona SDK, Gideros等

  成果物:
  - memory/analysis/lua_opengl_bindings_research.md
  - memory/comparison/binding_approaches_comparison.md
  - 推奨バインディング方式の提案

priority: high
depends_on: []
estimated_hours: 7

---

## Task T1-4: 類似プロジェクト移植事例調査

task_id: T1-4
title: "類似プロジェクトの移植事例調査"
description: |
  Windows 専用アプリケーション → macOS への移植事例を調査し、
  手法、課題、解決方法を把握せよ。

  調査観点:
  1. Windowsネイティブグラフィックス → OpenGL/Vulkan 移植事例
  2. C++バイナリラッパーの macOS 対応方法
  3. Lua スクリプト環境の移植例
  4. ビルドシステム統合（CMake, Xcode等）
  5. 既知の落とし穴と対策

  成果物:
  - memory/analysis/cross_platform_migration_cases.md
  - memory/best_practices/macos_porting_guide.md
  - 推奨実装パターンと注意点

priority: high
depends_on: []
estimated_hours: 6

---

## Summary

all_tasks:
  - T1-1: SimpleGraphic全API仕様調査（8h）
  - T1-2: HeadlessWrapper.lua完全分析（6h）
  - T1-3: 既存Lua+OpenGLバインディング調査（7h）
  - T1-4: 類似プロジェクト移植事例調査（6h）

total_estimated_hours: 27
total_estimated_days: 3.4 (並列実行で短縮可能)

expected_deliverables:
  - memory/analysis/ 配下に 5つの詳細分析ドキュメント
  - memory/diagrams/ 配下に依存関係図
  - memory/comparison/ 配下に比較分析
  - memory/best_practices/ 配下にガイドドキュメント

next_phase: 2
next_phase_name: "実装計画"
next_phase_assignee: "Mayor + Sage"
next_phase_trigger: "T1-1～T1-4 の全タスク完了時"

---

**村長（Mayor）からの指示：**

Sage よ、このタスクを受け取り、全力で Phase 1 の詳細調査を遂行せよ。
SimpleGraphic の全仕様把握なくば、実装計画は立てられない。
適切に時間配分し、3～4日以内の完了を目指せ。

タスク完了後は、memory/analysis 配下に成果物をまとめ、
村長へ報告するのだ。

**指令日時**: 2026-01-28T23:00:00Z
